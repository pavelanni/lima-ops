---
- name: Choose deployment type for your cluster
  hosts: localhost
  connection: local
  gather_facts: no
  
  tasks:
    - name: Display deployment options
      ansible.builtin.debug:
        msg: |
          
          ==========================================
          ğŸš€ DEPLOYMENT TYPE SELECTOR
          ==========================================
          
          ğŸ“‹ OPTION 1: BARE-METAL MinIO
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          âœ“ Direct MinIO installation on VMs
          âœ“ Better performance (no container overhead)  
          âœ“ Simpler architecture
          âœ“ Direct access to storage
          âœ“ Good for: Pure object storage clusters
          
          ğŸ“‹ OPTION 2: KUBERNETES-BASED (AIStor)
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          âœ“ Container orchestration with AIStor (Commercial MinIO)
          âœ“ Better scaling and management
          âœ“ Integration with K8s ecosystem
          âœ“ Enterprise features and support
          âœ“ Good for: Mixed workloads, microservices
          âš ï¸ Requires SUBNET license from https://subnet.min.io
          
          ğŸ“‹ OPTION 3: INFRASTRUCTURE ONLY
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          âœ“ Just provision VMs and disks
          âœ“ Decide application layer later
          âœ“ Maximum flexibility
          
          ==========================================
    
    - name: Check current configuration files
      ansible.builtin.find:
        paths: ../../vars/
        patterns: "*.yml"
      register: config_files
    
    - name: Display available configurations
      ansible.builtin.debug:
        msg: |
          
          Available Configuration Files:
          {% for file in config_files.files %}
          - {{ file.path | basename }}{% if 'baremetal' in file.path %} (bare-metal MinIO example){% elif 'cluster_config' in file.path %} (Kubernetes example){% endif %}
          {% endfor %}
          
          To customize:
          1. Copy and modify one of the config files
          2. Update cluster name, node count, disk sizes, etc.
          3. Run: make validate to check your configuration
    
    - name: Show commands for each option
      ansible.builtin.debug:
        msg: |
          
          ==========================================
          ğŸ”¥ QUICK START COMMANDS
          ==========================================
          
          ğŸ…°ï¸ FOR BARE-METAL MinIO:
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          make full-setup DEPLOYMENT_TYPE=baremetal CLUSTER_NAME=minio-cluster
          
          ğŸ…±ï¸ FOR KUBERNETES + AIStor:
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          # 1. First, add your SUBNET license to vars/cluster_config.yml
          # 2. Then run:
          make full-setup DEPLOYMENT_TYPE=kubernetes CLUSTER_NAME=k8s-cluster
          
          ğŸ…² FOR INFRASTRUCTURE ONLY:
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          make provision configure CLUSTER_NAME=my-cluster
          # Later choose: make deploy-baremetal OR make deploy-kubernetes
          
          ==========================================
          ğŸ”§ STEP-BY-STEP APPROACH:
          ==========================================
          
          1ï¸âƒ£ Validate configuration:
             make validate DEPLOYMENT_TYPE=<baremetal|kubernetes>
          
          2ï¸âƒ£ Create disks:
             make create-disks
          
          3ï¸âƒ£ Provision VMs:
             make provision
          
          4ï¸âƒ£ Configure VMs:
             make configure
          
          5ï¸âƒ£ Deploy application:
             make deploy-baremetal  OR  make deploy-kubernetes
          
          â“ For help: make help
          âš™ï¸ Current config: make show-config
          ==========================================